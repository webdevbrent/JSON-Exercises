<!DOCTYPE html>
<html lang="en">

<head>
    <title>AJAX</title>
</head>

<body>
    <h1>AJAX</h1>
    <div id="output">
    </div>
    <ul id="info"></ul>
    <button id="loadNew">Get a Joke</button>

    <script>
        var output = document.getElementById('output');
        var buttonClick = document.getElementById('loadNew');
        buttonClick.addEventListener('click', function () {
            loadAjax();
        })

        function loadAjax() {
            const url = 'https://api.chucknorris.io/jokes/random';
            fetch(url)
                .then(resJSON)
                .then(outputJSON)
                .catch(errorJSON)
        }

        function resJSON(response) {
            return response.json()
        }

        function outputJSON(json) {
            let html = '<img src=' + json.icon_url + '>' + '<br>' + '<h2>' + json.value + '</h2>'
            return document.querySelector('#output').innerHTML = html;
        }
        function errorJSON(error) {
            console.log(error);
        }

    </script>
</body>

</html>