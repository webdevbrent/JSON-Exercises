<!DOCTYPE html>
<html lang="en">

<head>
    <title>AJAX</title>
</head>

<body>
    <h1>AJAX</h1>
    <div id="output">
    </div>
    <ul id="info"></ul>
    <button id="loadNew">Get a Joke</button>

    <script>
        var output = document.getElementById('output');
        var buttonClick = document.getElementById('loadNew');
        buttonClick.addEventListener('click', function () {
            loadAjax();
        })


        function loadAjax() {
            var request = new XMLHttpRequest();
            request.onreadystatechange = function () {
                //console.log('state changed', request.readyState, request.status)
                if (request.readyState == 4 && request.status == 200) {

                    var json = JSON.parse(request.responseText);
                    var icon = '<img src=' + json.icon_url + '>';
                    var data = json.value;
                    var message = data;
                    output.innerHTML = icon + '<br>' + '<h2>' + message + '</h2>';
                    console.log(data);

                }
            }
            request.open('GET', 'https://api.chucknorris.io/jokes/random', true);
            request.send();
        }


    </script>
</body>

</html>